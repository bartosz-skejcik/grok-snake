<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>P2P Snake Game</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>P2P Snake Game</h1>
    <div id="gameContainer">
      <canvas id="gameCanvas" width="400" height="400"></canvas>
      <div id="controls">
        <input
          type="text"
          id="playerName"
          placeholder="Your Name"
          value="Player"
        />
        <button id="hostGame" class="button">Host Game</button>
        <button id="joinGame" class="button">Join Game</button>
        <button id="startGame" class="button" disabled>Start Game</button>
        <div>Score: <span id="score">0</span></div>
        <div>Players:</div>
        <ul id="playerList"></ul>
      </div>
    </div>
    <div id="gameOverScreen">
      <h2>Game Over</h2>
      <p>Final Score: <span id="finalScore">0</span></p>
      <button id="gameOverRestart" class="button">Play Again</button>
    </div>

    <script src="snake.js"></script>
    <script>
      document.getElementById("hostGame").addEventListener("click", () => {
        hostGame(getPlayerName());
        document.getElementById("startGame").disabled = false;
      });

      document.getElementById("joinGame").addEventListener("click", () => {
        joinGame(getPlayerName());
        document.getElementById("startGame").disabled = false;
      });

      document.getElementById("startGame").addEventListener("click", startGame);

      // Keydown event for moving the snake
      document.addEventListener("keydown", (e) => {
        if (gameRunning) {
          switch (e.key) {
            case "ArrowLeft":
              if (dx === 0) {
                dx = -1;
                dy = 0;
              }
              break;
            case "ArrowRight":
              if (dx === 0) {
                dx = 1;
                dy = 0;
              }
              break;
            case "ArrowUp":
              if (dy === 0) {
                dx = 0;
                dy = -1;
              }
              break;
            case "ArrowDown":
              if (dy === 0) {
                dx = 0;
                dy = 1;
              }
              break;
          }
        }
      });

      function getPlayerName() {
        return document.getElementById("playerName").value;
      }
    </script>
  </body>
</html>
